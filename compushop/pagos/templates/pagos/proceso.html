{% extends "tienda/base.html" %}

{% block title %}Resumen del pedido{% endblock %}

{% block content %}
<div class="container py-5">
  <h2 class="mb-4">Resumen del pedido</h2>
  <p class="mb-4">Haz clic en el botÃ³n para proceder con el pago.</p>

  <table class="table table-bordered text-center align-middle">
    <thead class="table-dark">
      <tr>
        <th colspan="4">Resumen</th>
      </tr>
    </thead>
    <tbody>
      {% if orden.descuento > 0 %}
      <tr class="table-light">
        <td class="text-end fw-semibold">Subtotal:</td>
        <td colspan="3">{{ orden.total_antes_descuento|floatformat:2 }} â‚¬</td>
      </tr>
      <tr class="table-warning">
        <td class="text-end">
          CupÃ³n "<strong>{{ orden.cupon.codigo }}</strong>" ({{ orden.descuento }}% de descuento)
        </td>
        <td colspan="3" class="text-danger">
          - {{ orden.obtener_descuento|floatformat:2 }} â‚¬
        </td>
      </tr>
      {% endif %}
      <tr class="table-success fw-bold">
        <td class="text-end">Total a pagar:</td>
        <td colspan="3">{{ orden.precio_total|floatformat:2 }} â‚¬</td>
      </tr>
    </tbody>
  </table>

  <!-- BotÃ³n de pago -->
  <form method="post" class="text-end mt-4">
    {% csrf_token %}
    <button type="submit" class="btn btn-success btn-lg">
      ðŸ’³ Pagar ahora con Stripe
    </button>
  </form>
</div>
{% endblock %}
