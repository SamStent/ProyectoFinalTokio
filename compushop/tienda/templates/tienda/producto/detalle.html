{% extends "tienda/base.html" %}

{% block title %}{{ producto.nombre }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- Imagen del producto -->
        <div class="col-md-6 mb-4">
            <div class="card">
                {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" class="card-img-top" alt="{{ producto.nombre }}">
                {% else %}
                <img src="https://via.placeholder.com/600x400?text=Sin+imagen" class="card-img-top" alt="Sin imagen">
                {% endif %}
                <div class="card-body">
                    <p class="card-text">{{ producto.descripcion }}</p>
                </div>
            </div>
        </div>

        <!-- Detalles del producto -->
        <div class="col-md-6">
            <h2>{{ producto.nombre }}</h2>
            <table class="table table-striped">
                <tbody>
                    <tr>
                        <th scope="row">Categoría</th>
                        <td>{{ producto.categoria.nombre }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Precio</th>
                        <td>{{ producto.precio }} €</td>
                    </tr>
                    <tr>
                        <th scope="row">Disponible</th>
                        <td>
                            {% if producto.disponible %}
                                <span class="text-success">Sí</span>
                            {% else %}
                                <span class="text-danger">No</span>
                            {% endif %}
                        </td>
                    </tr>
                    <tr>
                        <th scope="row">Creado</th>
                        <td>{{ producto.creado|date:"d/m/Y H:i" }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Última actualización</th>
                        <td>{{ producto.actualizado|date:"d/m/Y H:i" }}</td>
                    </tr>
                </tbody>
            </table>

            <a href="{% url 'tienda:listado_productos' %}" class="btn btn-secondary mt-3">← Volver al listado</a>
            <!-- Formulario para añadir al carrito -->
            <form action="{% url 'carro:aniadir_a_carro' producto.id %}" method="post" class="mt-4">
                {% csrf_token %}
                {{ formulario_producto_carro.as_p }}
                <button type="submit" class="btn btn-success">
                    <i class="bi bi-cart-plus"></i> Añadir al carrito
                </button>
            </form>

        </div>
    </div>
</div>
{% endblock %}
